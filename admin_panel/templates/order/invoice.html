<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Invoice - JISA</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
    body {
        font-family: Arial, sans-serif;
        background: #f1f1f1;
        margin: 0;
        padding: 0;
    }

    .invoice-page {
        width: 800px;
        background: white;
        margin: 20px auto;
        padding: 30px 40px;
        box-shadow: 0 4px 16px rgba(0,0,0,0.15);
    }

    .header {
        text-align: center;
        border-bottom: 2px solid #000;
        padding-bottom: 10px;
    }

    .header h1 {
        margin: 0;
        font-size: 24px;
        font-weight: bold;
    }

    .header p {
        margin: 2px 0;
        font-size: 14px;
    }

    .invoice-title {
        text-align: center;
        font-size: 22px;
        font-weight: bold;
        margin: 20px 0 10px;
        text-decoration: underline;
    }

    .info-block {
        display: flex;
        justify-content: space-between;
        margin-top: 10px;
        font-size: 14px;
    }

    .info-block div {
        width: 48%;
    }

    table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 20px;
        font-size: 14px;
    }

    table th {
        border: 1px solid #000;
        padding: 6px;
        text-align: left;
        background: #e8e8e8;
    }

    table td {
        border: 1px solid #000;
        padding: 6px;
    }

    .summary {
        margin-top: 20px;
        font-size: 14px;
    }

    .summary p {
        margin: 4px 0;
        display: flex;
        justify-content: space-between;
    }

    .history-title {
        margin-top: 30px;
        font-weight: bold;
        text-decoration: underline;
    }

    .terms {
        margin-top: 25px;
        font-size: 13px;
    }

    .footer-note {
        margin-top: 25px;
        font-size: 13px;
        font-style: italic;
    }

    .print-btn {
        margin-top: 20px;
        display: inline-block;
        background: #4a60e1;
        color: white;
        padding: 10px 20px;
        border-radius: 6px;
        font-weight: bold;
        text-decoration: none;
    }

    @media print {
        .print-btn {
            display: none;
        }
        body {
            background: white;
        }
        .invoice-page {
            margin: 0;
            box-shadow: none;
            width: 100%;
        }
    }
</style>
</head>

<body>

<div class="invoice-page">

    <!-- HEADER -->
    <div class="header">
        <h1>JISA</h1>
        <p>Address: Dhaka, Bangladesh</p>
        <p>Hotline: +880 1234-567890</p>
        <p>Email: info@jisa.com | Website: www.jisa.com</p>
    </div>

    <!-- TITLE -->
    <div class="invoice-title">Invoice / Bill</div>

    <!-- BASIC INFO -->
    <div class="info-block">
        <div>
            <p><b>NO:</b> {{ order.id }}</p>
            <p><b>Date:</b> {{ order.created_at|date:"d-M-Y" }}</p>
        </div>
        <div>
            <p><b>Customer:</b> {{ order.user }}</p>
            <p><span>Contact:</span> {{ order.mobile }}</p>
            <p><b>Email:</b> {{ order.email }}</p>
        </div>
    </div>

    <!-- ITEMS TABLE -->
    <table>
        <thead>
            <tr>
                <th>SL.</th>
                <th>ITEM</th>
                <th>SERIAL NO.</th>
                <th>QTY</th>
                <th>PRICE</th>
                <th>TOTAL</th>
            </tr>
        </thead>
        <tbody>
            {% for item in items %}
            <tr>
                <td>{{ forloop.counter }}</td>
                <td>{{ item.product_name }}</td>
                <td>{{ item.serial|default:"N/A" }}</td>
                <td>{{ item.qty }}</td>
                <td>৳ {{ item.price }}</td>
                <td>৳ {{ item.total }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    <!-- SUMMARY -->
    <div class="summary">
        <p><span>Total</span> <span>৳ {{ order.total }}</span></p>
        <p><span>Less / Add.</span> <span>৳ {{ order.adjustment|default:"0.00" }}</span></p>
        <p><span><b>Grand Total</b></span> <span><b>৳ {{ order.grand_total }}</b></span></p>
        <p><span>Paid</span> <span>৳ {{ order.amount_paid }}</span></p>
        <p><span>Due</span> <span>৳ {{ order.due_amount }}</span></p>
    </div>

    <p><b>Amount In Words:</b> {{ amount_in_words }}</p>

    <p class="footer-note"><i>Good received by customer in good condition.</i></p>

    <!-- PAYMENT HISTORY -->
    <div class="history-title">Payment History</div>

    <table>
        <thead>
            <tr>
                <th>SL</th>
                <th>Date</th>
                <th>Type</th>
                <th>Details</th>
                <th>Amount</th>
            </tr>
        </thead>
        <tbody>
            {% for ph in payment_history %}
            <tr>
                <td>{{ forloop.counter }}</td>
                <td>{{ ph.date }}</td>
                <td>{{ ph.type }}</td>
                <td>{{ ph.details }}</td>
                <td>৳ {{ ph.amount }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    <!-- TERMS -->
    <div class="terms">
        <p><b>Terms & Conditions:</b></p>
        <p>1. Goods once sold will not be refunded & changed.</p>
        <p>2. Warranty depends on manufacturer policies.</p>
        <p>3. Physical damage is not covered.</p>
        <p>4. Software / accessories may have different warranty terms.</p>
    </div>

    <p class="footer-note">This is a system-generated invoice. Signature or stamp not required.</p>

    <a href="#" class="print-btn" onclick="window.print()">Print Invoice</a>

</div>

</body>
</html>
