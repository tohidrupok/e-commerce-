{% extends "base.html" %}
{% load static %}

{% block title %}{{ category.name }}{% endblock %}

{% block content %}

<style>
/* ===== Sidebar ===== */
.filter-sidebar{
    background:#fff;
    padding:15px;
    border-radius:6px;
    box-shadow:0 2px 6px rgba(0,0,0,.06);
}
.filter-box{
    border-bottom:1px solid #eee;
    padding-bottom:12px;
    margin-bottom:12px;
}
.filter-title{
    font-size:14px;
    font-weight:600;
    margin-bottom:8px;
    color:#222;
}
.filter-check{
    display:flex;
    align-items:center;
    font-size:13px;
    margin-bottom:6px;
}
.filter-check input{margin-right:8px;}
.price-range{
    width:100%;
    accent-color:#ff5a00;
}
.price-inputs{
    display:flex;
    gap:10px;
    margin-top:8px;
}
.price-inputs input{
    width:100%;
    border:1px solid #ddd;
    padding:5px;
    font-size:12px;
    border-radius:4px;
}
.filter-reset{
    width:100%;
    padding:7px;
    background:#f5f5f5;
    border:1px solid #ddd;
    border-radius:4px;
    cursor:pointer;
}
.filter-reset:hover{
    background:#ff5a00;
    color:#fff;
    border-color:#ff5a00;
}

/* ===== Product Card ===== */
.product-card{
    display:block;
    background:#fff;
    border-radius:6px;
    overflow:hidden;
    box-shadow:0 2px 6px rgba(0,0,0,.05);
    margin-bottom:20px;
    text-decoration:none;
    color:#222;
}
.product-image img{
    width:100%;
    height:200px;
    object-fit:contain;
    padding:10px;
}
.product-info{
    padding:10px;
    text-align:center;
}
.product-info h4{
    font-size:14px;
    height:38px;
    overflow:hidden;
}
.price-new{
    color:#ff5a00;
    font-weight:600;
}
.price-old{
    text-decoration:line-through;
    font-size:12px;
    color:#999;
    margin-left:5px;
}
</style>

<div class="main-container container">

    <!-- Breadcrumb -->
    <ul class="breadcrumb">
        <li><a href="/"><i class="fa fa-home"></i></a></li>
        <li>{{ category.name }}</li>
    </ul>

    <div class="row">

        <!-- ================= SIDEBAR ================= -->
        <aside class="col-sm-4 col-md-3">

            <div class="filter-sidebar">

                <div class="filter-box">
                    <h4 class="filter-title">Price Range</h4>
                    <input type="range" min="0" max="84000" value="0" class="price-range">
                    <div class="price-inputs">
                        <input type="text" value="0">
                        <input type="text" value="84,000">
                    </div>
                </div>

                <div class="filter-box">
                    <h4 class="filter-title">Availability</h4>
                    <label class="filter-check"><input type="checkbox"> In Stock</label>
                    <label class="filter-check"><input type="checkbox"> Pre Order</label>
                    <label class="filter-check"><input type="checkbox"> Up Coming</label>
                </div>

                <div class="filter-box">
                    <h4 class="filter-title">Brand</h4>
                    <label class="filter-check"><input type="checkbox"> DJI</label>
                    <label class="filter-check"><input type="checkbox"> GoPro</label>
                    <label class="filter-check"><input type="checkbox"> Insta360</label>
                    <label class="filter-check"><input type="checkbox"> SJCAM</label>
                    <label class="filter-check"><input type="checkbox"> AKASO</label>
                </div>

                <div class="filter-box">
                    <h4 class="filter-title">Resolution</h4>
                    <label class="filter-check"><input type="checkbox"> Full HD</label>
                    <label class="filter-check"><input type="checkbox"> 4K</label>
                    <label class="filter-check"><input type="checkbox"> 5.7K</label>
                    <label class="filter-check"><input type="checkbox"> 8K</label>
                </div>

                <button class="filter-reset">Reset All</button>

            </div>

        </aside>
        <!-- ================= END SIDEBAR ================= -->


        <!-- ================= PRODUCTS ================= -->
        <!-- <div class="col-md-9 col-sm-8">

            <div class="row products-list">

                {% for product in products %}
				<div class="col-md-3 col-sm-6 col-xs-12">

					<div style="
						position:relative;
						background:#fff;
						border-radius:6px;
						padding:10px;
						height:100%;
						box-shadow:0 2px 6px rgba(0,0,0,.08);
					">

						{# ===== SAVE BADGE ===== #}
						{% if product.old_price %}
						<span style="
							position:absolute;
							top:8px;
							left:8px;
							background:#6f2dbd;
							color:#fff;
							font-size:11px;
							padding:3px 6px;
							border-radius:3px;
							z-index:2;
						">
							Save: {{ product.discount_percent }}%
						</span>
						{% endif %}

						{# ===== IMAGE (FIXED SIZE) ===== #}
						<a href="{% url 'product_detail' product.slug %}" style="
							display:block;
							height:200px;
							text-align:center;
							margin-bottom:8px;
						">
							{% with img=product.images.all.0 %}
								{% if img %}
									<img src="{{ img.image.url }}" alt="{{ product.name }}"
										style="max-width:100%; max-height:100%; object-fit:contain;">
								{% elif product.image %}
									<img src="{{ product.image.url }}" alt="{{ product.name }}"
										style="max-width:100%; max-height:100%; object-fit:contain;">
								{% else %}
									<img src="{% static 'img/default-product.jpg' %}" alt="No Image"
										style="max-width:100%; max-height:100%; object-fit:contain;">
								{% endif %}
							{% endwith %}
						</a>
						{# ===== TITLE ===== #}
						<h4 style="
							font-size:13px;
							font-weight:600;
							min-height:34px;
							margin-bottom:6px;
						">
							{{ product.name }}
						</h4>

						{# ===== SPECS ===== #}
						{% if product.short_description %}
						<div style="font-size:12px; margin-bottom:6px;">
							{{ product.short_description|safe }}
						</div>
						{% endif %}

						{# ===== PRICE ===== #}
						<div style="margin:6px 0;">
							<span style="color:#ff5a00; font-weight:600;">
								৳{{ product.price }}
							</span>
							{% if product.old_price %}
							<span style="
								text-decoration:line-through;
								font-size:12px;
								color:#999;
								margin-left:5px;
							">
								৳{{ product.old_price }}
							</span>
							{% endif %}
						</div>

						{# ===== BUTTON ===== #}
						<a href="{% url 'product_detail' product.slug %}" style="
							display:block;
							text-align:center;
							background:#f5f5f5;
							border-radius:4px;
							padding:6px;
							font-size:13px;
							color:#222;
							text-decoration:none;
						">
							<i class="fa fa-shopping-cart"></i> Buy Now
						</a>

					</div>

				</div>
				{% empty %}
				<p>No products found.</p>
				{% endfor %}


            </div>

        </div> -->
		<div class="col-md-9 col-sm-8">

    <div class="row products-list">

        {% for product in products %}
        <div class="col-md-3 col-sm-6 col-xs-12" style="margin-bottom:20px;">

            <div style="
                position:relative;
                background:#ffffff;
                border:1px solid #e5e7eb;
                border-radius:8px;
                height:100%;
                box-shadow:0 1px 4px rgba(0,0,0,.06);
                overflow:hidden;
            ">

                {# ===== SAVE BADGE ===== #}
                {% if product.old_price %}
                <span style="
                    position:absolute;
                    top:10px;
                    left:10px;
                    background:#5b21b6;
                    color:#fff;
                    font-size:11px;
                    padding:4px 8px;
                    border-radius:4px;
                    font-weight:600;
                    z-index:2;
                ">
                    Save {{ product.discount_percent }}%
                </span>
                {% endif %}

                {# ===== IMAGE BOX ===== #}
                <a href="{% url 'product_detail' product.slug %}" style="
                    display:flex;
                    align-items:center;
                    justify-content:center;
                    height:190px;
                    background:#fafafa;
                    padding:10px;
                ">
                    {% with img=product.images.all.0 %}
                        {% if img %}
                            <img src="{{ img.image.url }}" alt="{{ product.name }}"
                                 style="max-width:100%; max-height:100%; object-fit:contain;">
                        {% elif product.image %}
                            <img src="{{ product.image.url }}" alt="{{ product.name }}"
                                 style="max-width:100%; max-height:100%; object-fit:contain;">
                        {% else %}
                            <img src="{% static 'img/default-product.jpg' %}" alt="No Image"
                                 style="max-width:100%; max-height:100%; object-fit:contain;">
                        {% endif %}
                    {% endwith %}
                </a>

                {# ===== DIVIDER ===== #}
                <div style="
                    height:1px;
                    background:#e5e7eb;
                "></div>

                {# ===== INFO BOX ===== #}
                <div style="padding:10px;">

                    <h4 style="
                        font-size:14px;
                        font-weight:600;
                        line-height:1.4;
                        min-height:40px;
                        margin:0 0 6px;
                        color:#111827;
                    ">
                        {{ product.name }}
                    </h4>

                    {% if product.short_description %}
                    <div style="
                        font-size:12px;
                        color:#4b5563;
                        margin-bottom:6px;
                        max-height:32px;
                        overflow:hidden;
                    ">
                        {{ product.short_description|striptags }}
                    </div>
                    {% endif %}

                    <div style="margin:8px 0;">
                        <span style="
                            color:#ea580c;
                            font-weight:700;
                            font-size:14px;
                        ">
                            ৳{{ product.price }}
                        </span>

                        {% if product.old_price %}
                        <span style="
                            margin-left:6px;
                            font-size:12px;
                            color:#9ca3af;
                            text-decoration:line-through;
                        ">
                            ৳{{ product.old_price }}
                        </span>
                        {% endif %}
                    </div>

                    <a href="{% url 'product_detail' product.slug %}" style="
                        display:block;
                        text-align:center;
                        background:#f3f4f6;
                        border-radius:6px;
                        padding:7px;
                        font-size:13px;
                        font-weight:600;
                        color:#111827;
                        text-decoration:none;
                        transition:background .2s;
                    ">
                        <i class="fa fa-shopping-cart"></i> Details
                    </a>

                </div>

            </div>

        </div>
        {% empty %}
            <p>No products found.</p>
        {% endfor %}

    </div>

</div>

        <!-- ================= END PRODUCTS ================= -->

    </div>
</div>

{% endblock %}
